var path=require("path");let db=require("../models");var isAuthenticated=require("../config/middleware/isAuthenticated");module.exports=function(a){a.get("/",function(a,b){a.user&&b.redirect("/dashboard"),b.sendFile(path.join(__dirname,"../public/intro.html"))}),a.get("/login",isAuthenticated,function(a,b){a.user&&b.redirect("/dashboard"),b.sendFile(path.join(__dirname,"../public/login.html"))}),a.get("/dashboard",isAuthenticated,function(a,b){db.Item.findAll({where:{UserId:a.user.id},raw:!0,order:[["id","DESC"]]}).then(a=>{b.render("index",{items:a})})}),a.get("/item/:id",isAuthenticated,function(a,b){db.Item.findOne({where:{UserID:a.user.id,id:a.params.id},raw:!0}).then(a=>{b.render("viewitem",a)})})};